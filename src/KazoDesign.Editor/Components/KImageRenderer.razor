@using KazoDesign.Editor.Models

<image id="@Shape.Id"
       x="@Shape.X.ToString(System.Globalization.CultureInfo.InvariantCulture)" 
       y="@Shape.Y.ToString(System.Globalization.CultureInfo.InvariantCulture)"
       width="@Shape.Width.ToString(System.Globalization.CultureInfo.InvariantCulture)" 
       height="@Shape.Height.ToString(System.Globalization.CultureInfo.InvariantCulture)"
       href="@Shape.Source"
       preserveAspectRatio="@(Shape.PreserveAspectRatio ? "xMidYMid meet" : "none")"
       transform="@Shape.GetTransform()"
       class="design-element @(Shape.IsSelected ? "selected" : "")"
       data-id="@Shape.Id"
       data-element-name="@(Shape.Name ?? "")"
       data-element-description="@(Shape.Description ?? "")"
       data-element-type="@Shape.ElementType"
       data-meaning="@(Shape.Meaning?.ToString() ?? "")"
       data-width="@Shape.Width.ToString(System.Globalization.CultureInfo.InvariantCulture)"
       data-height="@Shape.Height.ToString(System.Globalization.CultureInfo.InvariantCulture)"
       data-source="@Shape.Source" />

@if (Shape.IsSelected)
{
    <rect x="@((Shape.X - 2).ToString(System.Globalization.CultureInfo.InvariantCulture))" 
          y="@((Shape.Y - 2).ToString(System.Globalization.CultureInfo.InvariantCulture))"
          width="@((Shape.Width + 4).ToString(System.Globalization.CultureInfo.InvariantCulture))" 
          height="@((Shape.Height + 4).ToString(System.Globalization.CultureInfo.InvariantCulture))"
          fill="none"
          stroke="#00d4ff"
          stroke-width="2"
          stroke-dasharray="4,2"
          pointer-events="none" />
}

@code {
    [Parameter, EditorRequired]
    public KImage Shape { get; set; } = default!;
}
